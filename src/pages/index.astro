---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro'
import PostCard from '../components/PostCard.astro';
import Footer from '../components/Footer.astro';

const allPosts = await Astro.glob('../pages/posts/*.md');
const allProjects = await Astro.glob('../pages/projects/*');
// const tags = [...new Set(allPosts.map((post) => post.frontmatter.tags).flat())];
---

<Layout title="CheryX's website">
	<div id="background">
		<main>
			
			<Header />

			<h1>Welcome to my lair!</h1>

			<p>
				Hi there, my name is CheryX! I'm your average programmer who works on
				programming projects at night and gets overwhelmed by things during the day.
			</p>
	
			<p>
				I mostly program web apps using JavaScript or Node.js,
				but I also tend to create very random or useless stuff.
				Currently, I'm writing an app for studying with flashcards <!-- MOTD -->
				because I got frustrated with the lack of features 
				of the alternatives available online.
				<small><i>and i am <b>definetly</b> not going to use paper</i></small>.
			</p>
	
			<h2>Featured projects</h2>
	
			<div id="projects">
				{allProjects.slice(0, 6).map((data) => <PostCard title={data.title} url={data.url} pub="0" />) }
			</div>

			<h2>Articles</h2>
	
			<div id="featured">
				{allPosts.slice(0, 6).map((post) => <PostCard title={post.frontmatter.title} url={post.url} pub={post.frontmatter.pubDate} />) }
			</div>

			<Footer />

		</main>
	</div>
</Layout>

<style>
	#projects, #featured {
		display: grid;
		grid-template-columns: repeat(auto-fill,minmax(240px, 1fr));
		gap: 1em;

		margin-bottom: 3em;
	}
</style>
